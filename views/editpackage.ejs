<!DOCTYPE html>
<html lang="en">
  <%- include('partials/head.ejs') %> <%- include('partials/adminnavbar.ejs') %>
  <body class="tms-page">
    <section class="tms-page-header">
      <div class="container">
        <div class="d-flex flex-wrap align-items-center justify-content-between">
          <div>
            <p class="tms-pill d-inline-block mb-2">Admin tools</p>
            <h1 class="mb-1">Edit Package</h1>
            <p class="text-muted mb-0">Update package details and availability.</p>
          </div>
          <a class="btn tms-btn-outline mt-3 mt-lg-0" href="/adminpackages">
            Back to packages
          </a>
        </div>
      </div>
    </section>

    <section class="tms-section">
      <div class="container">
        <div class="tms-card">
          <form
            action="/packages/<%=p._id%>?_method=PUT"
            method="post"
          >
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="name">Package Name</label>
                  <input
                    type="text"
                    class="form-control"
                    id="name"
                    placeholder="Enter Package Name"
                    name="packageName"
                    value="<%= p.packageName%>"
                  />
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="type">Package Type</label>
                  <input
                    type="text"
                    class="form-control"
                    id="type"
                    placeholder="Enter Package Type"
                    name="packageType"
                    value="<%=p.packageType%>"
                  />
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="location">Package Location</label>
                  <input
                    type="text"
                    class="form-control"
                    id="location"
                    name="packageLocation"
                    placeholder="Enter locations covered by package"
                    value="<%=p.packageLocation%>"
                  />
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="price">Package Price</label>
                  <input
                    type="number"
                    class="form-control"
                    id="price"
                    name="packagePrice"
                    placeholder="Enter Package Price"
                    value="<%=p.packagePrice%>"
                  />
                </div>
              </div>
            </div>

            <div class="form-group">
              <label for="features">Package Features</label>
              <input
                type="text"
                class="form-control"
                id="features"
                name="packageFeatures"
                placeholder="Enter Package Features separated by commas"
                value="<%=features%>"
              />
            </div>

            <div class="form-group">
              <label for="url">Package Image</label>
              <input
                type="text"
                class="form-control"
                id="url"
                name="packageImage"
                placeholder="Enter Package Image URL"
                value="<%=p.packageImage%>"
              />
            </div>

            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="days">Days</label>
                  <input
                    type="text"
                    class="form-control"
                    id="days"
                    name="days"
                    placeholder="Enter Number of days"
                    value="<%=p.days%>"
                  />
                </div>
              </div>
              <% var curr = new Date(); curr = curr.toISOString(); %>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="startdate">Start Date</label>
                  <input
                    type="date"
                    class="form-control"
                    id="startdate"
                    name="startDate"
                    placeholder="Start date of package"
                    value="<%=p.days%>"
                    min="<%= curr.substring(0,10)  %>"
                  />
                </div>
              </div>
            </div>

            <div class="form-group">
              <label for="details">Package Details</label>
              <textarea
                class="form-control"
                name="packageDetails"
                id="details"
                cols="20"
                rows="6"
                placeholder="Enter Package Description"
              ><%=p.packageDetails%></textarea>
            </div>

            <button type="submit" class="btn tms-btn w-100">Save changes</button>
          </form>
        </div>
      </div>
    </section>

    <script>
      const date = new Date("<%= p.startDate %>");
      document.getElementById("startdate").value = date
        .toISOString()
        .substring(0, 10);

      function Validate() {
        var name = document.getElementById("name").value;
        var type = document.getElementById("type").value;
        var location = document.getElementById("location").value;
        var price = document.getElementById("price").value;
        var features = document.getElementById("features").value;
        var url = document.getElementById("url").value;
        var days = document.getElementById("days").value;
        var date = document.getElementById("startdate").value;
        var details = document.getElementById("details").value;

        console.log("success");
        return true;
      }
    </script>
  </body>
</html>
